# ===============================================
# CONSOLIDATED ENVIRONMENT CONFIGURATION
# Misurata Entrepreneurship and Business Incubator Center
# Last Updated: 2025
# ===============================================

# -----------------------------------------------
# 1. DATABASE CONFIGURATION
# -----------------------------------------------
# Production database (uncomment for production)
# DATABASE_URL="mysql://citcoder_eitdc:1WpV3ZvlUUI9@localhost:3306/citcoder_eitdc"

# Development database (currently active)
DATABASE_USER="root"
DATABASE_PASSWORD="root"
DATABASE_NAME="citcoder_eitdc"
DATABASE_HOST="127.0.0.1"
DATABASE_PORT=3307

# DATABASE_URL Development with docker compose
DATABASE_URL=mysql://root:root@localhost:3307/citcoder_eitdc
REDIS_URL=redis://localhost:6379

# -----------------------------------------------
# 2. APPLICATION SETTINGS
# -----------------------------------------------
NEXT_PUBLIC_APP_NAME="Misurata Entrepreneurship Center"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="VOELDsagoTczKeFeVsfcEWtuejdwveGcfEJc9xuOhwA="

# -----------------------------------------------
# 3. ADMIN CONFIGURATION
# -----------------------------------------------
INIT_ADMIN_USERNAME="eitdc_admin"
INIT_ADMIN_EMAIL="ebic@cit.edu.ly"
INIT_ADMIN_PASSWORD="16Q7hCnPb0e"
ADMIN_API_KEY="9d7bee9c35490b52388059ed55d1ce696b3a7d899fccd42066c0b27efde75a09"  

# -----------------------------------------------
# 4. EMAIL SYSTEM - CIT.EDU.LY (GOOGLE WORKSPACE)
# -----------------------------------------------
# IMPORTANT: CIT.EDU.LY uses Google Workspace!
# MX records point to Google servers (ASPMX.L.GOOGLE.COM)


# Google Workspace SMTP Settings
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"  # Use 587 for STARTTLS (recommended)
SMTP_SECURE="false"  # false for port 587, true for port 465
SMTP_USER="ebic@cit.edu.ly"
SMTP_PASS="ekkfuailcwfjygrn"

# IMPORTANT: To make this work, you need to:
# 1. Go to: https://myaccount.google.com/
# 2. Sign in with: ebic@cit.edu.ly
# 3. Enable 2-Step Verification
# 4. Generate App Password: https://myaccount.google.com/apppasswords
# 5. Replace SMTP_PASS with the 16-character app password

# Email Addresses - All using cit.edu.ly domain
EMAIL_FROM="ebic@cit.edu.ly"
SMTP_FROM="ebic@cit.edu.ly"  # Legacy support
EMAIL_SUPPORT="ebic@cit.edu.ly"
EMAIL_ADMIN="ebic@cit.edu.ly"
EMAIL_REPLY_TO="ebic@cit.edu.ly"
ADMIN_NOTIFICATION_EMAIL="ebic@cit.edu.ly"

TEST_EMAIL="wwyuu799@gmail.com"

# Rate Limiting (adjust based on your server limits)
EMAIL_RATE_LIMIT_PER_HOUR="100"
EMAIL_RATE_LIMIT_PER_DAY="1000"
EMAIL_TOKEN_SECRET="47fadbc3afcba1be26e0545dbacebfd69ef48a79bff50dbc26b5358ddb5868b8"

# Retry Configuration
EMAIL_MAX_RETRY_ATTEMPTS="3"
EMAIL_RETRY_INITIAL_DELAY="5000"
EMAIL_RETRY_MAX_DELAY="300000"
EMAIL_TOKEN_TTL="3600"

# Development Mode
USE_EMAIL_LOGGING="false"  # Set to true to log emails instead of sending

# -----------------------------------------------
# 5. S3 STORAGE CONFIGURATION (MinIO for Development)
# -----------------------------------------------
# For local development with MinIO
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="minioadmin"
AWS_SECRET_ACCESS_KEY="minioadmin"
S3_ENDPOINT="http://localhost:9000"
S3_BUCKET_NAME="website-media"
S3_PUBLIC_ACCESS="true"

# For production, use AWS S3 or Cloudflare R2:
# AWS_REGION="eu-west-1"
# AWS_ACCESS_KEY_ID="your-aws-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret"
# S3_BUCKET_NAME="ebic-media-production"
# S3_ENDPOINT= (leave empty for AWS S3)
# CDN_URL= (optional CloudFront or Cloudflare CDN URL)


# -----------------------------------------------
# 6. OAUTH PROVIDERS (Optional)
# -----------------------------------------------
# Google OAuth (leave empty if not using)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# GitHub OAuth (leave empty if not using)
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# -----------------------------------------------
# 7. SECURITY & MONITORING
# -----------------------------------------------
# Security Headers
ALLOWED_ORIGINS="http://localhost:3000,https://ebic.cit.edu.ly,https://www.cit.edu.ly"
RATE_LIMIT_WINDOW="900000"  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS="100"

# Monitoring
ENABLE_MONITORING="true"
LOG_LEVEL="info"  # error, warn, info, debug
SENTRY_DSN=""  # Optional: for error tracking

# -----------------------------------------------
# 8. FEATURE FLAGS
# -----------------------------------------------
ENABLE_EMAIL_QUEUE="true"
ENABLE_TWO_FACTOR_AUTH="true"
ENABLE_DISPOSABLE_EMAIL_CHECK="true"
ENABLE_EMAIL_ANALYTICS="true"

# -----------------------------------------------
# IMPORTANT NOTES:
# -----------------------------------------------
# 1. This file consolidates all environment variables
# 2. Remove .env.example, .env.smtp.example after migration
# 3. For cit.edu.ly email to work:
#    - Ensure firewall allows ports 25, 465, 587
#    - May need to whitelist server IP with IT department
#    - Test connection with scripts/test-email.js
# 4. Common mail server issues:
#    - If mail.cit.edu.ly doesn't work, try:
#      * smtp.cit.edu.ly
#      * webmail.cit.edu.ly
#      * mx.cit.edu.ly
#    - Try different ports: 25, 465, 587, 2525
# -----------------------------------------------

# -----------------------------------------------
# 9. PUBLIC CONTACT INFO
# -----------------------------------------------
NEXT_PUBLIC_CONTACT_EMAIL="ebic@cit.edu.ly"
NEXT_PUBLIC_CONTACT_PHONE="+218 91 000 0000"
NEXT_PUBLIC_CONTACT_LOCATION="Industrial Technical College, Misurata, Libya"
NEXT_PUBLIC_WORKING_HOURS="Sun-Thu, 8am-3pm"
NEXT_PUBLIC_MAP_EMBED_URL="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3356.568467699703!2d15.0944!3d32.3752!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzLCsDIyJzMwLjciTiAxNcKwMDUnMzkuOCJF!5e0!3m2!1sen!2sly!4v1234567890"

# -----------------------------------------------
# 10. S3/OBJECT STORAGE (MinIO - FREE & SELF-HOSTED)
# -----------------------------------------------
# MinIO is 100% FREE, open-source, S3-compatible storage
# Runs in Docker container on YOUR server (no external costs)

# MinIO Configuration (Development & Production)
S3_ENDPOINT="http://localhost:9000"
AWS_ACCESS_KEY_ID="minioadmin"
AWS_SECRET_ACCESS_KEY="minioadmin"
AWS_REGION="us-east-1"
S3_BUCKET_NAME="website-media"
S3_PUBLIC_ACCESS="true"

# Optional: CDN URL (for production with Cloudflare/CloudFront)
# CDN_URL="https://cdn.yourdomain.com"

# NOTES:
# - MinIO Console UI: http://localhost:9001
# - Login with: minioadmin / minioadmin
# - All files stored in Docker volume: minio-data
# 11. THRESHOLD CONFIGURATION
# -----------------------------------------------
NEXT_PUBLIC_INNOVATORS_THRESHOLD=3
NEXT_PUBLIC_COLLABORATORS_THRESHOLD=3
NEXT_PUBLIC_FAQ_THRESHOLD=1
